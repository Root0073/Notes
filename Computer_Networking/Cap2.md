# TCP service model
##  TCP提供的服务的总结表哥
1. 两个应用程序之间的可靠的字节流
2. TCP使用四种机制来确保通信的可靠性: 当TCP层接收到数据时，他会向发送方发送一个确认包，告知数据已经正确到达

校验和用于检测数据是否损坏，TCP头部携带一个校验和，覆盖头部和段内的数据，用于检测段在传输过程中是否损坏

序列号用于检测数据是否丢失，每个段的头部携带该段在字节流中的第一个字节的序列号

流量控制防止接收方过载 接收方会不断告知发送方是否可以继续发送

3. TCP会按正确的数据将数据传递给应用程序 如果段在到达主机B时顺序混乱，TCP层会使用序列号将他们重新排列到正确的位置

4. TCP通过控制拥塞为整个网络提供了一个表面 TCP试图在所有使用网络的TCP连接，之间平均分配网络容量
## TCP Segment Format
目标端口告诉TCP层，这些字节应该传递给另一端的哪个应用程序，当一个新的连接开始时，应用程序会告诉TCP要与哪个服务建立连接

原端口告诉另一端的TCP层，他应该使用哪个端口来发送回数据 当一个新的连接开始时，连接的发起者会生成一个唯一的源端口号，以区分该链接与主机A和B之间到同一服务的任何其他连接

序列号表示TCP数据字段中的第一个字节在字节流中的位置

确认序列号告诉另一端我们期望接收的下一个字节，他还表示我们已经成功的接收到这个字节之前的所有字节

每个段中都有两个方向的序列号，这样他就可以在反方向传输的数据段上捎带确认信息

16位校验和根据整个头部和数据计算的，有助于接收方测验数据是否损坏

头部长度字段告诉我们TCP头部有多长

由一系列标志用于在连接的两端之间传递信息

ACK标志告诉我们确认序列号是有效的

SYN标志告诉我们正在发送同步信号，这是建立连接的三次握手的一部分

FIN标志则表示关闭连接的一个方向

PSH标志告诉我们当数据到达时另一端的TCP层应该立即交付数据

## The Unique ID of a TCP connect
TCP连接由TCP和IP头中的五部分信息唯一标识
IP愿地址和目的地址唯一标识了原点，而TCP的IP协议ID告诉我们这是一个TCP连接

主机A为每个新连接递增源端口号

TCP连接在初始化时会使用一个随机的出事序列号来引用字节流中的字节

# UDP Service Model
UDP所做的就是接收数据应用，创建一个UDP数据报，然后将其交付给网络层

UDP的头部只有四个：

源端口指示数据来自哪个应用

目标端口指示数据应该被传递到另一端主机的哪个应用，UDP的端口号与TCP中的作用相同

16位长度字段指定了整个UDP数据报的长度，单位是字节，该值至少为8字节，因为这是UDP

在使用IPv4时，UDP校验和是可选的，如果发送方不包含校验和，该字段将被填满0，如果使用了UDP校验和，那么他将覆盖UDP头部和数据
